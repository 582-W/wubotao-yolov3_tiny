put the layer function implementation here.